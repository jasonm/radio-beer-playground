<h1 id="nfc-beer">nfc-beer</h1>

<p>Notes for the <code>nfc-beer</code> project.</p>

<h2 id="related-works">Related Works</h2>

<ul>
  <li>KegDroidâ€”The Google-Powered Beer Tap
    <ul>
      <li><a href="http://gizmodo.com/5906483/kegdroidthe-google+powered-beer-tap">http://gizmodo.com/5906483/kegdroidthe-google+powered-beer-tap</a></li>
    </ul>
  </li>
</ul>

<h2 id="the-vision">The Vision</h2>

<p>Homebrew party.  200 people.  16 taps.  Everybody has a tasting glass and a smartphone.</p>

<p>Your tasting glass has an NFC tag in it.  Each tap has a proximity sensor + NFC controller.
When a bartender pours, the tap tells the system that Tap A poured Beer B into Cup C.</p>

<p>Then, you sync your glass with your smartphone via an app, and can not only see
which beers you drank but also a host of background information about the beers:
production details, pictures of the brewers picking out hops, temp and gravity during
fermentation.</p>

<p>(If your smartphone doesnt do NFC yet, dont sweat; the label has a QR code and/or
an alphanumeric shortcode you can fall back to.)</p>

<p>You can also find out where to buy them, or order a few bottles delivered to your home.</p>

<p>You can rate and keep notes, of course.  You can see who else has a similar taste profile.</p>

<p>A slick projected display behind the bar visualizes the popularity of each beer,
current estimated tap levels, other fun associations.</p>

<h2 id="the-core">The Core</h2>

<p>The core of this project is comprised of a few moving parts:</p>

<ul>
  <li>NFC labels + taps hardware system</li>
  <li>Data schema, repository, and API</li>
</ul>

<p>The higher-level features would be implemented as API clients on top of this;
say, an HTML5 mobile app for smartphone users and a separate D3.js-based
bar visualization.</p>

<h2 id="hardware-layer">Hardware layer</h2>

<p>NFC labels + controllers.</p>

<p>[ ] Select and vet hardware.
[ ] Is it better to use Pi + NFC breakout (adafruit 364) or Pi + Arduino shields?</p>

<ul>
  <li>Adafruit NFC/RFID on Raspberry Pi
    <ul>
      <li><a href="http://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/overview">http://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/overview</a></li>
    </ul>
  </li>
  <li>PN532 NFC/RFID controller breakout board - v1.3
    <ul>
      <li><a href="https://www.adafruit.com/products/364">https://www.adafruit.com/products/364</a></li>
    </ul>
  </li>
  <li>Adafruit PN532 NFC/RFID Controller Shield for Arduino + Extras
    <ul>
      <li><a href="http://www.adafruit.com/products/789">http://www.adafruit.com/products/789</a></li>
    </ul>
  </li>
  <li>Alternative NFC Arduino shield
    <ul>
      <li><a href="http://www.seeedstudio.com/depot/nfc-shield-p-916.html?cPath=132_134">http://www.seeedstudio.com/depot/nfc-shield-p-916.html?cPath=132_134</a></li>
    </ul>
  </li>
  <li>Possibly interface Pi with Arduino shield
    <ul>
      <li><a href="http://www.raspberrypi.org/archives/tag/arduino">http://www.raspberrypi.org/archives/tag/arduino</a></li>
      <li><a href="http://omer.me/2012/05/introducing-ponte/">http://omer.me/2012/05/introducing-ponte/</a></li>
      <li><a href="http://hackaday.com/2012/05/06/using-arduino-shields-with-the-raspberry-pi/">http://hackaday.com/2012/05/06/using-arduino-shields-with-the-raspberry-pi/</a></li>
    </ul>
  </li>
  <li>Possibly need to multiplex UART from Pi to NFC controllers
    <ul>
      <li><a href="http://raspberrypi.stackexchange.com/questions/3475/how-to-get-more-than-one-uart-interface">http://raspberrypi.stackexchange.com/questions/3475/how-to-get-more-than-one-uart-interface</a></li>
    </ul>
  </li>
  <li>NFC tags
    <ul>
      <li><a href="http://www.buynfctags.com/nfc-tags/stickers.html">http://www.buynfctags.com/nfc-tags/stickers.html</a></li>
      <li><a href="http://rapidnfc.com/">http://rapidnfc.com/</a></li>
    </ul>
  </li>
</ul>

<p>Cost estimate for 1 installation, assume 16 taps, 200 attendees:</p>

<pre><code>Item                 Qty     Ea      Total
Raspberry Pi         1       35.00    35.00
NFC controller       16      39.00   624.00
NFC tags             200      1.00   200.00
-------------------------------------------
                        Grand Total: 859.00
                  Cost per attendee:   4.30
</code></pre>

<p>Unaccounted costs: labels, tasting glasses.  Of course beer, taps, location, etc.</p>

<h2 id="core-software-layer">Core software layer</h2>

<p>Core entities:</p>

<ul>
  <li><code>beer</code>: an individual batch of brew</li>
  <li><code>vessel</code>: how do we subdivide this into bottle etc</li>
  <li><code>pour</code>: event</li>
  <li><code>tag</code>: physical nfc tag</li>
</ul>

<p>Pre-fill database with beers in vessels.
Smart taps publish <code>pour</code> events that link <code>beer</code> to a <code>tag</code>.</p>

<h2 id="api-clients">API clients</h2>

<ul>
  <li><em>Mobile web app</em> registers <code>tag</code> with a <code>user</code>, fetches contents via core api
and displays <code>beer</code> information based on that.</li>
  <li><em>Bar display</em> fetches information from core api like tallies of pours, synthesiszes it,
 and displays beautiful visualizations.</li>
</ul>
